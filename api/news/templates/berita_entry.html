   // fetch(`{% url 'news:show-berita' ${beritaId} %}`)
 
 async function getBerita(){
    return fetch("{% url 'news:show-berita-json' %}").then((res) => res.json())
  }

  function addBerita() {
    fetch("{% url 'news:add-berita' %}", {
      method: "POST",
      body: new FormData(document.querySelector('#addBeritaForm')),
    })
    .then(response => refreshProductEntries())

    document.getElementById("addBeritaForm").reset(); 
    document.querySelector("[data-modal-toggle='crudModal']").click();
    return false;
  }

  <!-- EDIT MODAL -->
  <div id="editModal" tabindex="-1" aria-hidden="true" class="hidden fixed inset-0 z-50 w-full flex items-center justify-center bg-gray-800 bg-opacity-50 overflow-x-hidden overflow-y-auto transition-opacity duration-300 ease-out">
    <div id="editModalContent" style="background-color: rgba(125, 110, 95, 0.9);" class="relative rounded-lg shadow-lg w-5/6 sm:w-3/4 md:w-1/2 lg:w-1/3 mx-4 sm:mx-0 transform scale-95 opacity-0 transition-transform transition-opacity duration-300 ease-out">
          <!-- Modal header -->
          <div class="flex items-center justify-between p-4 border-b border-gray-200 rounded-t">
              <h3 class="text-xl font-semibold text-[#fffbf2]">Edit Berita</h3>
              <button type="button" class="text-[#fffbf2] bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center" id="closeEditModalBtn">
                <svg aria-hidden="true" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                </svg>
                <span class="sr-only">Close modal</span>
              </button>
          </div>
        <!-- Modal body -->
        <div class="px-6 py-4 space-y-6 form-style">
            <form id="editBeritaForm">
                <div class="mb-4">
                    <label for="edit_judul" class="block text-sm font-medium text-[#fffbf2]">Judul</label>
                    <input type="text" id="edit_judul" name="judul" class="mt-1 block w-full border border-fffbf2 bg-[#aba197] text-[#fffbf2] rounded-md p-2" required>
                </div>
                <div class="mb-4">
                    <label for="edit_image" class="block text-sm font-medium text-[#fffbf2]">Ganti Gambar (opsional)</label>
                    <div class="flex justify-center items-center mt-1">
                      <div id="wrapImageEdit" class="w-1/2 mx-3 hidden"></div>
                      <input type="file" id="edit_image" name="image" class="mt-1 block w-full border border-fffbf2 bg-[#aba197] text-[#fffbf2] rounded-md p-2" accept="image/*" onchange="previewImage(event, 'wrapImageEdit')">
                    </div>
                </div>
                <div class="mb-4">
                    <label for="edit_konten" class="block text-sm font-medium text-[#fffbf2]">Konten</label>
                    <textarea id="edit_konten" name="konten" rows="3" class="mt-1 block w-full resize-none border border-fffbf2 bg-[#aba197] text-[#fffbf2] rounded-md p-2" required></textarea>
                </div>
            </form>
          </div>
          <!-- Modal footer -->
          <div class="flex flex-col space-y-2 md:flex-row md:space-y-0 md:space-x-2 p-6 border-t border-gray-200 rounded-b justify-center md:justify-end">
              <button type="button" class="bg-[#c5beb7] hover:bg-[#b9b1a9] text-white font-bold py-2 px-4 rounded-lg" id="cancelEditButton">Cancel</button>
              <button type="submit" id="submitEditBeritaEntry" form="editBeritaForm" class="bg-[#c1a386] hover:bg-[#a48b72] text-white font-bold py-2 px-4 rounded-lg">Save</button>
          </div>
      </div>
  </div>

  <!-- DELETE MODAL -->
  <div id="deleteModal" tabindex="-1" aria-hidden="true" class="hidden fixed inset-0 z-50 w-full flex items-center justify-center bg-gray-800 bg-opacity-50 overflow-x-hidden overflow-y-auto transition-opacity duration-300 ease-out">
      <div id="deleteModalContent" style="background-color: rgba(125, 110, 95, 0.9);" class="relative rounded-lg shadow-lg w-5/6 sm:w-3/4 md:w-1/2 lg:w-1/3 mx-4 sm:mx-0 transform scale-95 opacity-0 transition-transform transition-opacity duration-300 ease-out">
          <!-- Modal header -->
          <div class="flex items-center justify-between p-4 border-b border-gray-200 rounded-t">
              <h3 class="text-xl font-semibold text-[#fffbf2]">Hapus Berita</h3>
              <button type="button" class="text-[#fffbf2] bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center" id="closeDeleteModalBtn">
                  <svg aria-hidden="true" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                      <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                  </svg>
                  <span class="sr-only">Close modal</span>
              </button>
          </div>
          <!-- Modal body -->
          <div class="px-6 py-4 space-y-6 form-style">
              <p class="text-[#fffbf2]">Apakah Anda yakin ingin menghapus berita ini?</p>
          </div>
          <!-- Modal footer -->
          <div class="flex flex-col space-y-2 md:flex-row md:space-y-0 md:space-x-2 p-6 border-t border-gray-200 rounded-b justify-center md:justify-end">
              <button type="button" class="bg-[#c5beb7] hover:bg-[#b9b1a9] text-white font-bold py-2 px-4 rounded-lg mr-2" id="cancelDeleteButton">Cancel</button>
              <button type="button" id="confirmDeleteButton" class="bg-[#c1a386] hover:bg-[#a48b72] text-white font-bold py-2 px-4 rounded-lg">Delete</button>
          </div>
      </div>
  </div>


<script>
   function showEditModal(beritaId) {
        const modal = document.getElementById('editModal');
        const modalContent = document.getElementById('editModalContent');

        modal.classList.remove('hidden');
        setTimeout(() => {
            modalContent.classList.remove('opacity-0', 'scale-95');
            modalContent.classList.add('opacity-100', 'scale-100');
        }, 50);

        // Ambil data berita dari server berdasarkan ID
        fetch(`edit_berita/${beritaId}`) // Pastikan URL ini sesuai dengan endpoint Anda
            .then(response => response.json())
            .then(data => {
                console.log(data);
                document.getElementById('edit_judul').value = data[0].fields.judul; // Ganti dengan nama field sesuai
                document.getElementById('edit_konten').value = data[0].fields.konten; // Ganti dengan nama field sesuai

                // Jika Anda memiliki gambar, tampilkan di preview
                const editImagePreview = document.getElementById('edit_image_preview');
                editImagePreview.src = data.fields.image; // Ganti dengan nama field gambar yang sesuai
            })
      

        document.getElementById("cancelEditButton").addEventListener("click", hideEditModal);
        document.getElementById("closeEditModalBtn").addEventListener("click", hideEditModal);
    }


    function hideEditModal() {
      const modal = document.getElementById('editModal');
      const modalContent = document.getElementById('editModalContent');

      modalContent.classList.remove('opacity-100', 'scale-100');
      modalContent.classList.add('opacity-0', 'scale-95');

      setTimeout(() => {
        modal.classList.add('hidden');
      }, 150); 
    }
      
    document.getElementById('submitEditBeritaEntry').onclick = function() {
      const form = document.getElementById('editBeritaForm');
      const formData = new FormData(form);
      
      // Tambahkan ID berita ke dalam data form untuk pengeditan
      formData.append('berita_id', beritaId); // pastikan kamu menyimpan ID berita

      fetch(`/berita/edit/${beritaId}/`, { // Sesuaikan dengan URL endpoint edit berita
          method: 'POST',
          body: formData,
          headers: {
              'X-CSRFToken': getCookie('csrftoken'), // Pastikan CSRF token disertakan
          }
      })
      .then(response => {
          if (response.ok) {
              document.getElementById('editModal').classList.add('hidden');
              window.location.reload(); // Refresh halaman
          } else {
              console.error('Error updating berita:', response.statusText);
          }
      })
      .catch(error => console.error('Error:', error));
  };

// DELETE MODAL
  

  function showDeleteModal(beritaId) {
    const modal = document.getElementById('deleteModal');
    const modalContent = document.getElementById('deleteModalContent');

    modal.classList.remove('hidden'); 
    setTimeout(() => {
      modalContent.classList.remove('opacity-0', 'scale-95');
      modalContent.classList.add('opacity-100', 'scale-100');
    }, 50); 

    document.getElementById("cancelDeleteButton").addEventListener("click", hideDeleteModal);
    document.getElementById("closeDeleteModalBtn").addEventListener("click", hideDeleteModal);

    // Ambil data berita dari server berdasarkan ID
  
    // fetch(`news/show-berita/${beritaId}/`)  // Sesuaikan URL dengan endpoint yang ada
    //     .then(response => response.json())
    //     .then(data => {
    //         // Isi input di dalam modal dengan data berita
    //         document.getElementById('edit_judul').value = data[0].fields.judul;
    //         document.getElementById('edit_konten').value = data[0].fields.konten;

    //         // Tampilkan gambar sebelumnya
    //         const imageUrl = data[0].fields.image; // Sesuaikan dengan field yang sesuai
    //         const editImagePreview = document.getElementById('edit_image_preview');
    //         editImagePreview.src = imageUrl; // Set URL gambar
    //     })
      //     .catch(error => console.error('Error fetching berita:', error));
  }

    function hideDeleteModal() {
      const modal = document.getElementById('deleteModal');
      const modalContent = document.getElementById('deleteModalContent');

      modalContent.classList.remove('opacity-100', 'scale-100');
      modalContent.classList.add('opacity-0', 'scale-95');

      setTimeout(() => {
        modal.classList.add('hidden');
      }, 150); 
    }



// Handle delete confirmation
document.getElementById('confirmDeleteButton').onclick = function() {
    if (deleteBeritaId !== null) {
        fetch(`/berita/delete/${deleteBeritaId}/`, {  // Sesuaikan URL dengan endpoint delete berita
            method: 'POST',
            headers: {
                'X-CSRFToken': getCookie('csrftoken'), // Sertakan CSRF token
            }
        })
        .then(response => {
            if (response.ok) {
                hideDeleteModal(); // Tutup modal setelah berhasil delete
                window.location.reload(); // Reload halaman setelah delete
            } else {
                console.error('Error deleting berita:', response.statusText);
            }
        })
        .catch(error => console.error('Error:', error));
    }
};
</script>